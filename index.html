<!doctype html>
<html>

<head>
    <title>de100a80kilos</title>
    <meta name="description" content="This is personal fitness progress tracker">
    <meta name="keywords" content="fitness tracker notebook">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="navbar">
        <div class="container">
            <a class="logo" href="#">de100a80kilos</a>
            <img id="menuh" class="mobile-menu" src="images/icons8-menu.svg" alt="">
            <nav>
                <ul class="primary-nav">
                    <li><a href="https://www.instagram.com/de100a80kilos/" target="_blank">Instagram</a></li>
                    <li><a href="#">Diario</a></li>
                    <!-- <li><a href="#">Fotos</a></li> -->
                </ul>
            </nav>
        </div>
    </div>
    <div class="second-bar">
        <div id="new_container_dates"> </div>
        <script src="./node_modules/axios/dist/axios.min.js"></script>
        <script src="referenceaws.js"></script>
        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1117.0.min.js"></script>
        <script>
            axios.get('https://vdkiwfxfkk.execute-api.us-east-1.amazonaws.com/prod/getitems/de100a80kilosdiario')
                .then(response => {

                    var medata = response.data
                    var arr_dates = []


                    medata.Items.forEach(post => {
                        const unmarshallItem = AWS.DynamoDB.Converter.unmarshall(post)

                        var postdate = new Date(unmarshallItem.entrydate).toLocaleDateString("en-US")
                        var posttitle = unmarshallItem.title
                        var arrobj = {
                            fecha: "",
                            titulo: ""
                        }

                        arrobj.fecha = postdate
                        arrobj.titulo = posttitle
                        arr_dates.push(arrobj)


                    })

                    var test_sort_arr = arr_dates.sort(function(a, b) {
                        var c = new Date(a.fecha);
                        var d = new Date(b.fecha);
                        return d - c;
                    });

                    function makeUL(array) {
                        // Create the list element:
                        var list = document.createElement('ul');

                        for (var i = 0; i < array.length; i++) {
                            // Create the list item:
                            var item = document.createElement('li');

                            // Set its contents:

                            item.appendChild(document.createTextNode(array[i].fecha + ': ' + array[i].titulo));
                            console.log(JSON.stringify(array[i].fecha))

                            // Add it to the list:
                            list.appendChild(item);
                        }
                        // Finally, return the constructed list:
                        return list;
                    }
                    new_container_dates.appendChild(makeUL(test_sort_arr));

                })
        </script>

    </div>

</body>

</html>